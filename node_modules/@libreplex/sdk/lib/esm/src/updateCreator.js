import { SystemProgram } from "@solana/web3.js";
import { controlToAnchor } from "./creatorControls";
export async function updateCreator(input) {
    const { program, phases, creatorController } = input;
    const me = program.provider.publicKey;
    if (!me) {
        throw new Error("Missing provider. Are you sure your wallet is connected?");
    }
    const anchorPhases = [];
    for (const ph of phases) {
        const controls = [];
        for (const control of ph.control) {
            controls.push(controlToAnchor(control));
        }
        anchorPhases.push({
            controls,
            end: ph.end ? ph.end.getTime() / 1000 : null,
            label: ph.label,
            start: ph.start.getTime() / 1000,
        });
    }
    return program.methods.update({
        phases: anchorPhases,
    }).accounts({
        systemProgram: SystemProgram.programId,
        payer: me,
        updateAuthority: me,
        creatorController,
    });
}
//# sourceMappingURL=updateCreator.js.map